---
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import { siteConfig } from "../config";
import "../styles/global.css";
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <title>Router Project - {siteConfig.name}</title>
  </head>
  <body>
    <Header />
    <main class="container mx-auto px-6 py-12 max-w-4xl">
      <!-- Back button -->
      <a 
        href="/#projects" 
        class="inline-flex items-center text-sm text-gray-600 hover:text-gray-900 mb-8"
      >
        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
        Back to Projects
      </a>

      <!-- Title -->
      <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4">
        Embedded Systems / Hardware Reverse Engineering
      </h1>
      <h2 class="text-2xl text-gray-600 mb-8">
        UART Access on Linksys WRT54G v6
      </h2>

      <!-- Overview Section -->
      <section class="mb-12">
        <h3 class="text-2xl font-bold text-gray-900 mb-4">Overview</h3>
        <p class="text-gray-600 leading-relaxed mb-4">
          <!-- Add your overview text here -->
          Systematically probed the routerâ€™s PCB to identify UART pins for firmware access. Some pins were partially filled, so I used continuity tests and voltage measurements to distinguish ground, TX, and RX. I monitored voltage fluctuations to identify active communication lines, all while ensuring safe interaction with 3.3V logic circuits. This process involved soldering, understanding PCB layout, signal flow, and serial communication protocols.
        </p>
      </section>

      <!-- Hardware Setup Section -->
      <section class="mb-12">
        <h3 class="text-2xl font-bold text-gray-900 mb-4">Hardware Setup</h3>
        <div class="mb-6">
          <img 
            src="/images/physical-setup.JPG" 
            alt="Physical router setup" 
            class="w-full rounded-lg shadow-lg mb-4"
          />
          <img 
            src="/images/physical-pad.JPG" 
            alt="Physical router pad soldering" 
            class="w-full rounded-lg shadow-lg mb-4"
          />
          <p class="text-sm text-gray-500 italic">Physical setup of the router</p>
        </div>
        <p class="text-gray-600 leading-relaxed">
          <!-- Add hardware setup description -->
          The hardware setup consisted of a Linksys WRT54G v6 router with dupont wires soldered directly to the UART test points on the PCB. An Arduino Nano RP2040 was used as a USB-to-serial adapter to interface between the router's UART pins and a host computer. The primary objective was to gain bootloader and console access to the router, allowing for low-level system interaction and potential firmware modifications. The UART connection provided direct access to the router's boot sequence and Linux shell, bypassing the standard web interface.
        </p>
      </section>

      <!-- Wiring Diagram Section -->
      <section class="mb-12">
        <h3 class="text-2xl font-bold text-gray-900 mb-4">Wiring Diagram</h3>
        <div class="mb-6">
          <img 
            src="/images/wiring-diagram.jpg" 
            alt="Wiring diagram" 
            class="w-full rounded-lg shadow-lg mb-4"
          />
          <p class="text-sm text-gray-500 italic">UART connection wiring diagram</p>
        </div>
        <p class="text-gray-600 leading-relaxed">
          <!-- Add wiring explanation -->
          Straightforward wiring setup, RX->TX, TX->RX, GND->GND
        </p>
      </section>

      <!-- Software/Configuration Section -->
      <section class="mb-12">
        <h3 class="text-2xl font-bold text-gray-900 mb-4">Software & Configuration</h3>
        <p class="text-gray-600 leading-relaxed mb-4">
          <!-- Add software/config details -->
          By using the screen command on Mac, we are able to connect to the routers serial port through the Arduino and access the bootloader shell.
        </p>
        <!-- Optional: Add code blocks if needed -->
        <pre class="bg-gray-100 p-4 rounded-lg overflow-x-auto mb-4"><code>// Example command
screen /dev/ttyUSB0 115200</code></pre>
      </section>

      <!-- Results/Performance Section -->
      <section class="mb-12">
        <h3 class="text-2xl font-bold text-gray-900 mb-4">Results & Performance</h3>
        <img 
            src="/images/boot-screenshot.png" 
            alt="Boot screenshot" 
            class="w-full rounded-lg shadow-lg mb-4"
          />
        <img 
            src="/images/shell-screenshot.png" 
            alt="Shell screenshot" 
            class="w-full rounded-lg shadow-lg mb-4"
          />
        <p class="text-gray-600 leading-relaxed">
          <!-- Add results -->
          We are able to see and verify boot sequence as well as shell accesss. 
        </p>
      </section>

      <!-- Challenges & Solutions Section -->
      <section class="mb-12">
        <h3 class="text-2xl font-bold text-gray-900 mb-4">Challenges & Solutions</h3>
        <ul class="space-y-4">
          <li class="flex items-start">
            <span class="inline-block w-2 h-2 rounded-full bg-gray-400 mt-2 mr-3 flex-shrink-0" />
            <div>
              <strong class="text-gray-900">Challenge:</strong>
              <span class="text-gray-600"> For a relatively 'simple' project, I faced challenges mainly due to this being my first project in the cybersecurity space and the first PCB I have worked with that had filled in holes where headers would normally go.
              I also was unable to connect directly to ground pins because of (what I believe) was some oxidized coating that prevented soldering, which led me to use continuity mode on my multimeter to find a different ground as shown in the picture of the physical setup. 
              After my inital soldering process, I was surpised to see any text pop up in my terminal during the first boot. I was initally confused because the text looked like 
              garbled ASCII but after further research I learned it could be due to a host of different reasons: baud rate mismatching, poor soldering connections, or incorrect cables and more. 
              This led me to refine my approach and essentially restart the project, learning how to use a multimeter to verify pin functionality by watching voltage levels during boot, 
              which also helped me realize I had soldered to the wrong pad on the PCB in my first attempt. After a fresh soldering connection, to the correct pins, I was sucessfully able to 
              access the router. 
              </span>
            </div>
          </li>
          <!-- Add more challenges -->
        </ul>
      </section>

      <!-- Technologies Used -->
      <section class="mb-12">
        <h3 class="text-2xl font-bold text-gray-900 mb-4">Technologies Used</h3>
        <div class="flex flex-wrap gap-2">
          <span class="px-3 py-1.5 bg-gray-900 text-white rounded-lg text-sm font-medium">Arduino Nano RP2040 Connect</span>
          <span class="px-3 py-1.5 bg-gray-900 text-white rounded-lg text-sm font-medium">Linksys WRT54G v6 Router</span>
          <!-- Add more tags -->
        </div>
      </section>
    </main>
    <Footer />
  </body>
</html>
